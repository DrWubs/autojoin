// /joinqueue and /canceljoin
 
function joinCommandCalled(e){if(e=="/joinqueue"){attemptingJoin=true;API.on(API.WAIT_LIST_UPDATE,t);function t(){if(attemptingJoin==true){if(API.getWaitListPosition(user)>-1){user=null;console.log("joined");attemptingJoin=false}if(attemptingJoin==true){console.log("singleshot running");var e=API.getWaitList().length;if(e<50){API.djJoin()}}}}var n=API.getTimeRemaining();console.log("join in progress1");setTimeout(function(){if(attemptingJoin==true){console.log("join in progress2");var e=setInterval(function(){if(attemptingJoin==true){console.log("join in progress3");API.djJoin();if(API.getWaitListPosition(API.getUser().id)>-1||API.getTimeRemaining()>1){clearInterval(e);console.log("join failed or successful");attemptingJoin=false}}else{clearInterval(e)}},40)}},n*1e3-1e3)}}function cancelJoin(e){if(e=="/canceljoin"){attemptingJoin=false;console.log("join canceled")}}var attemptingJoin=false;API.on(API.CHAT_COMMAND,joinCommandCalled);API.on(API.CHAT_COMMAND,cancelJoin)
